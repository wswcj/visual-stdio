#include<iostream>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/mman.h>
#include <unistd.h>
using namespace std;

int* p = NULL;
unsigned char numword[22][40] = {
	/*--  文字:  l  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7C, 0x00, 0x7C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00,
	0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00,
	0x7F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

	/*--  文字:  i  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x0C, 0x00,
	0x7C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00,
	0x7F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

	/*--  文字:  a  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x00, 0x73, 0x80, 0x73, 0x80, 0x1F, 0x80, 0x7F, 0x80, 0xF3, 0x80, 0xE3, 0x80, 0xF7, 0xC0,
	0x7F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

	/*--  文字:  n  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
			0xFF, 0x00, 0xFB, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80,
			0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

			/*--  文字:  g  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0xC0, 0x77, 0xC0, 0x73, 0x80, 0x73, 0x80, 0x77, 0x00, 0x3F, 0x00, 0x70, 0x00, 0x7F, 0x80,
	0x67, 0x80, 0xE1, 0xC0, 0x73, 0x80, 0x7F, 0x00 },

			/*--  文字:     --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  g  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0xC0, 0x77, 0xC0, 0x73, 0x80, 0x73, 0x80, 0x77, 0x00, 0x3F, 0x00, 0x70, 0x00, 0x7F, 0x80,
	0x67, 0x80, 0xE1, 0xC0, 0x73, 0x80, 0x7F, 0x00 },

			/*--  文字:  o  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x00, 0x7F, 0x80, 0x61, 0x80, 0xE1, 0xC0, 0xE1, 0xC0, 0xE1, 0xC0, 0x61, 0x80, 0x73, 0x80,
	0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  u  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xF7, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x77, 0xC0,
	0x3F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:     --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  b  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0xF0, 0x00, 0x70, 0x00, 0x70, 0x00, 0x70, 0x00,
	0x7F, 0x00, 0x7B, 0x80, 0x71, 0x80, 0x71, 0xC0, 0x71, 0xC0, 0x71, 0xC0, 0x71, 0x80, 0x73, 0x80,
	0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  a  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x00, 0x73, 0x80, 0x73, 0x80, 0x1F, 0x80, 0x7F, 0x80, 0xF3, 0x80, 0xE3, 0x80, 0xF7, 0xC0,
	0x7F, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:     --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  s  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x80, 0x73, 0x80, 0x71, 0x80, 0x3C, 0x00, 0x1F, 0x00, 0x07, 0x80, 0x61, 0x80, 0x73, 0x80,
	0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  h  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0xF0, 0x00, 0x70, 0x00, 0x70, 0x00, 0x70, 0x00,
	0x7F, 0x00, 0x7B, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80, 0x73, 0x80,
	0xFF, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  i  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1E, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x0C, 0x00,
	0x7C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00, 0x0C, 0x00,
	0x7F, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:     --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

			/*--  文字:  w  --*/
			/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
			/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xC0,0xED,0xC0,0x6F,0x80,0x6F,0x80,0x7F,0x80,0x7F,0x00,0x3F,0x00,0x3F,0x00,
0x37,0x00,0x00,0x00,0x00,0x00,0x00,0x00 },

	/*--  文字:  o  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x00, 0x7F, 0x80, 0x61, 0x80, 0xE1, 0xC0, 0xE1, 0xC0, 0xE1, 0xC0, 0x61, 0x80, 0x73, 0x80,
	0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

	/*--  文字:     --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

	/*--  文字:  e  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x3F, 0x00, 0x7B, 0x80, 0x71, 0x80, 0x61, 0x80, 0x7F, 0xC0, 0x60, 0x00, 0x61, 0x80, 0x7B, 0x80,
	0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },

	/*--  文字:  r  --*/
	/*--  宋体12;  此字体下对应的点阵为：宽x高=10x20   --*/
	/*--  宽度不是8的倍数，现调整为：宽度x高度=16x20  --*/
		{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0xFF, 0xC0, 0xFF, 0xC0, 0x3C, 0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00, 0x38, 0x00,
	0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 } };

	void draw_point(int x, int y, int color)
	{
		if (x >= 0 && x < 800 && y >= 0 && y < 480)
		{
			*(p + y * 800 + x) = color;
		}

	}

	void show_word(unsigned char* word1, int totalbyte, int wordwide, int wordcolor, int start_x, int start_y)
	{
		//3.显示字 
		int num = 0;
		int x, y;
		int i, j;
		for (i = 0; i < totalbyte; i++)  //字节数
		{
			for (j = 7; j >= 0; j--) //每个字节8bit
			{
				if (word1[i] & (1 << j))   // 1 << 7 -> 1000 0000 刷一个与底色不同的颜色
				{
					x = num % wordwide;   //x = (i % 2) * 8 + (7 -j);
					y = num / wordwide;   //y = i / 2;
					draw_point(start_x + x, start_y + y, wordcolor);

				}
				num++;
			}
		}

	}

	int main()
	{
		//1.打开帧缓冲设备文件
		int lcd_fd = open("/dev/fb0", O_RDWR);
		if (lcd_fd < 0)
		{
			cout << "open lcd_fd failed" << endl;
		}
		//2.映射
		p = (int*)mmap(NULL, 800 * 480 * 4, PROT_READ | PROT_WRITE, MAP_SHARED, lcd_fd, 0);
		if (p == MAP_FAILED)
		{
			cout << "mmap failed" << endl;
		}

		//刷底色->白色
		int i, j;
		for (i = 0; i < 480; i++)
		{
			for (j = 0; j < 800; j++)
			{
				draw_point(j, i, 0x00FFFFFF);
			}
		}
		for (int k = 0; k < 22; ++k) {
			show_word(numword[k], sizeof(numword[k]), 16, 0x00FF0000, k * 16, 5);
		}


		//解除映射
		int c = munmap(p, 800 * 480 * 4);
		if (c == -1)
		{
			cout << "munmap failed" << endl;
		}
		//关闭文件
		c = close(lcd_fd);
		if (c == -1)
		{
			cout << "close lcd_fd failed" << endl;
		}



		return 0;
	}